# NTRIP Caster 环境配置文件示例
# 复制此文件为 .env 并根据需要修改配置

# ================================
# 项目基础配置
# ================================

# 项目名称
PROJECT_NAME=ntrip-caster

# 应用配置
APP_NAME=NTRIP Caster
APP_VERSION=2.1.8

# 部署环境 (development|testing|production)
ENVIRONMENT=development
APP_ENV=production

# Docker Compose 文件路径
COMPOSE_FILE=docker-compose.yml

# ================================
# 服务网络配置
# ================================

# NTRIP Caster 服务配置
NTRIP_HOST=0.0.0.0
NTRIP_PORT=2101
HOST=0.0.0.0

# Web 管理界面配置
WEB_HOST=0.0.0.0
WEB_PORT=5757

# Nginx 代理配置
NGINX_HTTP_PORT=80
NGINX_HTTPS_PORT=443
NGINX_DEV_PORT=8080

# 监控服务端口
PROMETHEUS_PORT=9090
GRAFANA_PORT=3000
REDIS_PORT=6379

# 开发工具端口（仅开发环境）
ADMINER_PORT=8081
DOZZLE_PORT=8082
CADVISOR_PORT=8083

# ================================
# 应用配置
# ================================

# 数据库配置
DATABASE_PATH=/app/data/2rtk.db
DATABASE_BACKUP_ENABLED=true
DATABASE_BACKUP_INTERVAL=24h

# 日志配置
LOG_LEVEL=INFO
LOG_DIR=/app/logs
LOG_FORMAT=json
LOG_MAX_SIZE=100M
LOG_MAX_FILES=10

# 缓存配置
CACHE_ENABLED=true
CACHE_TTL=3600
CACHE_MAX_SIZE=256MB

# 性能配置
MAX_CONNECTIONS=5000
THREAD_POOL_SIZE=5000
BUFFER_SIZE=8192
CONNECTION_TIMEOUT=1800
CLIENT_TIMEOUT=300
MOUNT_TIMEOUT=1800
REQUEST_TIMEOUT=60
WORKER_PROCESSES=auto

# RTCM配置
RTCM_PARSE_INTERVAL=5
RTCM_BUFFER_SIZE=1000
RTCM_PARSE_DURATION=30

# Web配置
REALTIME_PUSH_INTERVAL=5
SYSTEM_STATUS_INTERVAL=1
PAGE_REFRESH_INTERVAL=30

# ================================
# 安全配置
# ================================

# 认证配置
SECRET_KEY=your-secret-key-change-this-in-production
ADMIN_USERNAME=admin
ADMIN_PASSWORD=admin123
AUTH_ENABLED=false
AUTH_TOKEN_EXPIRE=24h

# SSL/TLS 配置
SSL_ENABLED=false
SSL_CERT_PATH=/etc/nginx/ssl/cert.pem
SSL_KEY_PATH=/etc/nginx/ssl/key.pem
SSL_DHPARAM_PATH=/etc/nginx/ssl/dhparam.pem

# CORS 配置 - 已移除，不需要CORS功能
# CORS_ENABLED=true
# CORS_ORIGINS=*
# CORS_METHODS=GET,POST,PUT,DELETE,OPTIONS
# CORS_HEADERS=*

# ================================
# 监控配置
# ================================

# Prometheus 配置
PROMETHEUS_RETENTION_TIME=30d
PROMETHEUS_RETENTION_SIZE=10GB
PROMETHEUS_SCRAPE_INTERVAL=15s
PROMETHEUS_EVALUATION_INTERVAL=15s

# Grafana 配置
GRAFANA_ADMIN_USER=admin
GRAFANA_ADMIN_PASSWORD=admin123
GRAFANA_SECRET_KEY=your-grafana-secret-key
GRAFANA_DISABLE_GRAVATAR=true
GRAFANA_DISABLE_ANALYTICS=true
GRAFANA_DISABLE_UPDATE_CHECK=true

# 告警配置
ALERT_ENABLED=true
ALERT_WEBHOOK_URL=
ALERT_EMAIL_ENABLED=false
ALERT_EMAIL_SMTP_HOST=
ALERT_EMAIL_SMTP_PORT=587
ALERT_EMAIL_USERNAME=
ALERT_EMAIL_PASSWORD=
ALERT_EMAIL_FROM=
ALERT_EMAIL_TO=

# ================================
# Redis 配置
# ================================

# Redis 基础配置
REDIS_PASSWORD=
REDIS_MAX_MEMORY=256mb
REDIS_MAX_MEMORY_POLICY=allkeys-lru
REDIS_SAVE_ENABLED=true
REDIS_AOF_ENABLED=true

# Redis 持久化配置
REDIS_SAVE_SECONDS=900
REDIS_SAVE_CHANGES=1
REDIS_AOF_FSYNC=everysec

# ================================
# 系统配置
# ================================

# 时区配置
TZ=Asia/Shanghai

# 语言配置
LANG=zh_CN.UTF-8
LC_ALL=zh_CN.UTF-8

# Python 配置
PYTHONDONTWRITEBYTECODE=1
PYTHONUNBUFFERED=1
PYTHONIOENCODING=utf-8

# ================================
# 开发配置
# ================================

# 调试模式
DEBUG=false
DEBUG_LEVEL=INFO

# 开发工具
HOT_RELOAD=false
AUTO_RESTART=false

# 测试配置
TEST_DATABASE_PATH=/app/data/test.db
TEST_LOG_LEVEL=DEBUG

# ================================
# 生产环境配置
# ================================

# 性能优化
PRODUCTION_MODE=false
OPTIMIZE_FOR_PRODUCTION=false

# 资源限制
MAX_MEMORY_USAGE=1G
MAX_CPU_USAGE=1.0
MAX_DISK_USAGE=10G

# 备份配置
BACKUP_ENABLED=true
BACKUP_SCHEDULE=0 2 * * *
BACKUP_RETENTION_DAYS=30
BACKUP_COMPRESSION=true
BACKUP_ENCRYPTION=false

# ================================
# 外部服务配置
# ================================

# 邮件服务
MAIL_ENABLED=false
MAIL_SMTP_HOST=
MAIL_SMTP_PORT=587
MAIL_SMTP_USER=
MAIL_SMTP_PASSWORD=
MAIL_FROM_ADDRESS=
MAIL_FROM_NAME=NTRIP Caster

# 短信服务
SMS_ENABLED=false
SMS_PROVIDER=
SMS_API_KEY=
SMS_API_SECRET=

# 对象存储
S3_ENABLED=false
S3_ENDPOINT=
S3_ACCESS_KEY=
S3_SECRET_KEY=
S3_BUCKET=
S3_REGION=

# ================================
# 高级配置
# ================================

# 集群配置
CLUSTER_ENABLED=false
CLUSTER_NODE_ID=1
CLUSTER_NODES=

# 负载均衡
LOAD_BALANCER_ENABLED=false
LOAD_BALANCER_ALGORITHM=round_robin

# 限流配置
RATE_LIMIT_ENABLED=true
RATE_LIMIT_REQUESTS_PER_MINUTE=60
RATE_LIMIT_BURST=10

# 缓存策略
CACHE_STRATEGY=lru
CACHE_COMPRESSION=true
CACHE_ENCRYPTION=false

# 健康检查
HEALTH_CHECK_ENABLED=true
HEALTH_CHECK_INTERVAL=30s
HEALTH_CHECK_TIMEOUT=10s
HEALTH_CHECK_RETRIES=3

# ================================
# 自定义配置
# ================================

# 在此添加您的自定义环境变量
# CUSTOM_VARIABLE=value

# Nginx配置
NGINX_HTTP_PORT=80
NGINX_HTTPS_PORT=443

# 时区配置
TZ=Asia/Shanghai

# Docker配置
COMPOSE_PROJECT_NAME=ntrip-caster
COMPOSE_FILE=docker-compose.yml

# 数据持久化路径
DATA_PATH=./data
LOGS_PATH=./logs
CONFIG_PATH=./config

# SSL证书路径（如果使用HTTPS）
SSL_CERT_PATH=./nginx/ssl/cert.pem
SSL_KEY_PATH=./nginx/ssl/key.pem

# 备份配置
BACKUP_ENABLED=true
BACKUP_INTERVAL=24h
BACKUP_RETENTION=7d

# 调试配置
DEBUG_MODE=false
VERBOSE_LOGGING=false