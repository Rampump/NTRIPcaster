# NTRIP Caster 配置文件示例
# 复制此文件为 config.ini 并根据需要修改配置

[NTRIP]
# NTRIP 服务器配置
host = 0.0.0.0
port = 2101
max_connections = 1000
connection_timeout = 30
data_timeout = 60

# 服务器信息
server_name = 2RTK NTRIP Caster
server_version = 2.1.8
server_description = High-performance NTRIP Caster with RTCM parsing

[WEB]
# Web 管理界面配置
host = 0.0.0.0
port = 5757
debug = false
secret_key = your-secret-key-change-this

# 会话配置
session_timeout = 3600
remember_me_duration = 2592000

[DATABASE]
# 数据库配置
type = sqlite
path = /app/data/2rtk.db

# 连接池配置（仅适用于 PostgreSQL/MySQL）
# host = localhost
# port = 5432
# username = ntrip
# password = your-password
# database = ntrip_caster
# pool_size = 10
# max_overflow = 20

[LOGGING]
# 日志配置
level = INFO
max_size = 50MB
max_files = 5
log_format = %(asctime)s - %(name)s - %(levelname)s - %(message)s

# 日志文件路径
main_log = /app/logs/main.log
ntrip_log = /app/logs/ntrip.log
error_log = /app/logs/errors.log

[SECURITY]
# 安全配置
enable_rate_limiting = true
max_requests_per_minute = 60
max_login_attempts = 5
lockout_duration = 300

# IP 白名单（可选，留空表示允许所有IP）
allowed_ips = 

# IP 黑名单
blocked_ips = 

[RTCM]
# RTCM 数据处理配置
enable_parsing = true
max_message_size = 1024
buffer_size = 4096

# 支持的 RTCM 消息类型
supported_messages = 1001,1002,1003,1004,1005,1006,1007,1008,1009,1010,1011,1012,1013,1019,1020,1033,1074,1075,1076,1077,1084,1085,1086,1087,1094,1095,1096,1097,1124,1125,1126,1127,1230

[PERFORMANCE]
# 性能配置
thread_pool_size = 100
max_queue_size = 1000
enable_compression = true
compression_level = 6

# 缓存配置
enable_cache = true
cache_size = 1000
cache_ttl = 300

[MONITORING]
# 监控配置
enable_metrics = true
metrics_port = 9090
metrics_path = /metrics

# 健康检查
health_check_interval = 30
health_check_timeout = 10

[WEBSOCKET]
# WebSocket 配置（用于实时数据推送）
enable_websocket = true
ping_interval = 25
ping_timeout = 60
max_message_size = 1048576

# 已移除 CORS 配置（安全漏洞修复）
# cors_allowed_origins = *

[BACKUP]
# 数据备份配置
enable_auto_backup = true
backup_interval = 86400
backup_retention = 7
backup_path = /app/data/backups

[ALERTS]
# 告警配置
enable_alerts = false
smtp_server = smtp.gmail.com
smtp_port = 587
smtp_username = your-email@gmail.com
smtp_password = your-app-password
alert_recipients = admin@example.com

# 告警阈值
max_connection_threshold = 900
high_cpu_threshold = 80
high_memory_threshold = 80
disk_space_threshold = 90

[FEATURES]
# 功能开关
enable_user_registration = false
enable_mount_point_auto_discovery = true
enable_statistics = true
enable_real_time_monitoring = true

# 实验性功能
enable_clustering = false
enable_load_balancing = false

[ADVANCED]
# 高级配置
tcp_keepalive = true
tcp_nodelay = true
socket_timeout = 30
buffer_size = 8192

# 系统限制
max_memory_usage = 1073741824  # 1GB
max_cpu_usage = 80
max_disk_usage = 90

# 调试选项
enable_debug_mode = false
debug_log_level = DEBUG
enable_profiling = false